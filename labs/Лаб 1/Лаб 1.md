# Лабораторная работа № 1. Установка и конфигурация операционной системы на виртуальную машину #
# Малыхин Максим НПИбд 02-20 #

## 1.1. Цель работы ##
Целью данной работы является приобретение практических навыков
установки операционной системы на виртуальную машину, настройки минимально необходимых для дальнейшей работы сервисов.

## 1.2. Указания к работе

## 1.2.1. Техническое обеспечение ##

Лабораторная работа подразумевает установку на виртуальную машину
VirtualBox (https://www.virtualbox.org/) операционной системы Linux
(дистрибутив Rocky (https://rockylinux.org/) или CentOS (https://
www.centos.org/)).

Выполнение работы возможно как в дисплейном классе факультета
физико-математических и естественных наук РУДН, так и дома. Описание
выполнения работы приведено для дисплейного класса со следующими характеристиками:

-  Intel Core i3-550 3.2 GHz, 4 GB оперативной памяти, 20 GB свободного
 места на жёстком диске;
 
-  ОС Linux Gentoo (http://www.gentoo.ru/);
 
-  VirtualBox верс. 6.1 или старше;
 
-  каталог с образами ОС для работающих в дисплейном классе:
/afs/dk.sci.pfu.edu.ru/common/files/iso/.

## 1.2.2. Соглашения об именовании ##

При выполнении работ следует придерживаться следующих правил именования: имя виртуальной машины, имя хоста вашей виртуальной машины,
пользователь внутри виртуальной машины должны совпадать с логином
студента, выполняющего лабораторную работу. Вы можете посмотреть
ваш логин, набрав в терминале ОС типа Linux команду id -un.

## 1.3. Последовательность выполнения работы ##

Загрузите в дисплейном классе операционную систему Linux. Осуществите
вход в систему. Запустите терминал. Перейдите в каталог /var/tmp:
cd /var/tmp

Создайте каталог с именем пользователя (совпадающий с логином студента в дисплейном классе). Для этого можно использовать команду:

mkdir /var/tmp/Cid -unC
или непосредственно:
mkdir /var/tmp/имя_пользователя

Здесь вместо имя_пользователя должен быть указан ваш логин (учётная
запись) в дисплейном классе.
Запустите виртуальную машину, введя в командной строке:
VirtualBox &

Проверьте в свойствах VirtualBox месторасположение каталога
для виртуальных машин. Для этого в VirtualBox выберите Файл
Настройки , вкладка Общие . В поле Папка для машин (рис. 1.1) должно стоять
/var/tmp/имя_пользователя. Здесь имя_пользователя — логин (учётная запись) студента в дисплейном классе. Если указан другой каталог, то
требуется изменить его, как указано выше.

![](/images/vb.png)

Если вы работаете не в дисплейном классе, а на собственной технике, то
расположение каталога виртуальных машин определяете по своему усмотрению.
Создайте новую виртуальную машину. Для этого в VirtualBox выберите
Машина Создать .

![](/images/path.png)

Укажите имя виртуальной машины (ваш логин в дисплейном классе), тип
операционной системы — Linux, RedHat (рис. 1.2).

![](/images/new.png)

Укажите размер основной памяти виртуальной машины (рис. 1.3) — 2048
МБ (или большее число, кратное 1024 МБ, если позволяют технические характеристики вашего компьютера).

![](/images/new_memory.png)

Задайте конфигурацию жёсткого диска — загрузочный,VDI (BirtualBox Disk
Image), динамический виртуальный диск (рис. 1.4–1.6).

![](/images/disk.png)

Задайте размер диска — 40 ГБ (или больше), его расположение — в данном
случае /var/tmp/имя_пользователя/имя_пользователя.vdi (рис. 1.7).

![](/images/space.png)

![](/images/precreated.png)

Выберите в VirtualBox для Вашей виртуальной машины Настройки
Носители . Добавьте новый привод оптических дисков и выберите образ
операционной системы, например для работающих в дисплейных классах
/afs/dk.sci.pfu.edu.ru/common/files/iso/Rocky-8.6-x86_64-dvd1.iso
(рис. 1.8).

![](/images/controller.png)

Если вы работаете на собственной технике, то DVD-образ операционной
системы под архитектуру вашего компьютера необходимо предварительно
скачать с официального сайта.

Запустите виртуальную машину (рис. 1.9), выберите English в качестве языка интерфейса (рис. 1.10) и перейдите к настройкам установки операционной
системы (рис. 1.11).

![](/images/empty_installer.png)

При необходимости скорректируйте часовой пояс, раскладку клавиатуры
(рекомендуется добавить русский язык, но в качестве языка по умолчанию
указать английский язык; задать комбинацию клавиш для переключения
между раскладками клавиатуры — например Alt + Shift ).

В разделе выбора программ укажите в качестве базового окружения
Server with GUI , а в качестве дополнения — Development Tools (рис. 1.12).
Отключите KDUMP (рис. 1.13).

Место установки ОС оставьте без изменения (рис. 1.14).
Включите сетевое соединение и в качестве имени узла укажите
user.localdomain (рис. 1.15), где вместо user укажите имя своего пользователя в соответствии с соглашением об именовании.

![](/images/localdomain.png)

Установите пароль для root и пользователя с правами администратора
(рис. 1.16–1.17).
После завершения установки операционной системы корректно перезапустите виртуальную машину (рис. 1.18) и примите условия лицензии
(рис. 1.19–1.20).

![](/images/user.png)

В VirtualBox оптический диск должен отключиться автоматически, но если
это не произошло, то необходимо отключить носитель информации с образом, выбрав Свойства Носители Rocky-версия-dvd1.iso Удалить устройство .

Войдите в ОС под заданной вами при установке учётной записью. В меню
Устройства виртуальной машины подключите образ диска дополнений гостевой ОС (рис. 1.21, 1.22), при необходимости введите пароль пользователя
root вашей виртуальной ОС.

![](/images/guest.png)

После загрузки дополнений нажмите Return или Enter и корректно перезагрузите виртуальную машину

## 1.3.1. Установка имени пользователя и названия хоста ##

Если при установке виртуальной машины вы задали имя пользователя или
имя хоста, не удовлетворяющее соглашению об именовании (см. раздел 1.2.2),
то вам необходимо исправить это.

1. Запустите виртуальную машину и залогиньтесь.

![](/images/login.png)

2. Запустите терминал и получите полномочия администратора:
su -

3. Создайте пользователя (вместо username укажите ваш логин в дисплейном классе):
adduser -G wheel username

4. Задайте пароль для пользователя (вместо username укажите ваш логин
в дисплейном классе):
passwd username

![](/images/adduser.png)

5. Установите имя хоста (вместо username укажите ваш логин в дисплейном
классе):
hostnamectl set-hostname username

6. Проверьте, что имя хоста установлено верно:
hostnamectl

![](/images/hostname.png)

## 1.4. Домашнее задание ##

Дождитесь загрузки графического окружения и откройте терминал. В окне
терминала проанализируйте последовательность загрузки системы, выполнив команду dmesg. Можно просто просмотреть вывод этой команды:
Можно использовать поиск с помощью grep:
dmesg | grep -i "то, что ищем"
Получите следующую информацию.

1. Версия ядра Linux (Linux version).
2. Частота процессора (Detected Mhz processor).
3. Модель процессора (CPU0).
4. Объем доступной оперативной памяти (Memory available).
5. Тип обнаруженного гипервизора (Hypervisor detected).
6. Тип файловой системы корневого раздела.
7. Последовательность монтирования файловых систем.

![](/images/dmesg.png)

![](/images/dmesg2.png)

## 1.6. Контрольные вопросы ##

1. Какую информацию содержит учётная запись пользователя?
**User ID - логин; Password – наличие пароля; UID - идентификатор пользователя; GID - идентификатор группы по умолчанию; User Info – вспомогательная информация о пользователе (полное имя, контакты и т.д.) Home Dir - начальный (он же домашний) каталог; Shell - регистрационная оболочка
все данные учетной записи(в директории пользователя),**
2. Укажите команды терминала и приведите примеры:
для получения справки по команде;- **man**
для перемещения по файловой системе;- **cd**
для просмотра содержимого каталога;- **ls**
для определения объёма каталога;- **du -sh**
для создания / удаления каталогов / файлов;- **mk/rm**
для задания определённых прав на файл / каталог;- **chmod**
для просмотра истории команд.- **history**
3. Что такое файловая система? Приведите примеры с краткой характеристикой.
**Фа́йловая систе́ма (англ. file system) — порядок, определяющий способ организации, хранения и именования данных на носителях информации в компьютерах, а также в другом электронном оборудовании: цифровых фотоаппаратах, мобильных телефонах и т. п. Файловая система определяет формат содержимого и способ физического хранения информации, которую принято группировать в виде файлов.
Некоторые из наиболее популярных файловых систем сегодня: FAT32 (для флэш-накопителей и, ранее, Windows), NTFS (для Windows) и ext4 (для Linux).**
4. Как посмотреть, какие файловые системы подмонтированы в ОС? Посмотреть в **/proc/mounts**
5. Как удалить зависший процесс? **taskkill**

## Вывод ##
Я приобрел практические навыки
установки операционной системы на виртуальную машину, настройки минимально необходимых для дальнейшей работы сервисов.

